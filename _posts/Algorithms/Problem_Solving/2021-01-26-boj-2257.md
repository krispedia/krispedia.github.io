---
layout: post
title: "[BOJ] 2257. 화학식량"
categories: problem-solving
tag : [boj, cpp]
---

## 문제 링크<br>
 [https://www.acmicpc.net/problem/2257](https://www.acmicpc.net/problem/2257)<br>


#### 전체코드<br>

<details>
<summary>맞은 코드 보기 - stack</summary>
<div markdown="1">

```cpp
#include<iostream>
#include<string>
#include<unordered_map>
#include<stack>

using namespace std;

void solution(string s){
    int answer = 0;
    unordered_map<string, int> weights;
    weights["H"] = 1;
    weights["C"] = 12;
    weights["O"] = 16;

    stack<string> st;

    for(int idx=0; idx<s.length(); idx++){
        string c = s.substr(idx, 1);
        if(c=="H"||c=="C"||c=="O"||c=="("){
            st.push(c);
        }
        else if(c==")"){
            int subSum=0;
            while(st.top()!="("){
                string target = st.top();
                st.pop();
                if(target=="H"||target=="C"||target=="O")
                    subSum+=weights[target];
                else
                    subSum+=stoi(target);
            }
            st.pop();
            st.push(to_string(subSum));
        }
        else{
            string target = st.top();
            st.pop();
            int subSum=0;
            if(target=="H"||target=="C"||target=="O")
                subSum=weights[target]*stoi(c);
            else
                subSum=stoi(target)*stoi(c);
            st.push(to_string(subSum));
        }
    }
    while(!st.empty()){
        string target = st.top();
        st.pop();
        if(target=="H"||target=="C"||target=="O")
            answer+=weights[target];
        else
            answer+=stoi(target);
    }
    cout<<answer<<"\n";
}
int main(){
    ios_base::sync_with_stdio(false);
	cin.tie(NULL);

    string s; cin>>s;
    solution(s);

    return 0;
}
```
</div>
</details>

<details>
<summary>맞은 코드 보기 - recursion</summary>
<div markdown="1">

```cpp
#include<iostream>
#include<string>
#include<unordered_map>

using namespace std;

unordered_map<char, int> weights{
    {'H',1},
    {'C',12},
    {'O',16}
};
// RETURN: pair<닫힘괄호 idx, sum> 
pair<int, int> solution(string s, int idx){
    int sum = 0;
    while(idx<s.length()){
        if(s[idx]==')') break;
        else if(s[idx]=='(') {
            pair<int, int> result = solution(s, idx+1);
            idx = result.first+1;
            if(idx<s.length() && s[idx]>='0' && s[idx]<='9')
                sum += result.second*(int(s[idx++])-'0');
            else
                sum += result.second;
        }
        else if(s[idx]=='H'||s[idx]=='C'||s[idx]=='O'){
            if(idx+1<s.length() && (s[idx+1]>='0' && s[idx+1]<='9')){
                sum += weights[s[idx]]*(int(s[idx+1])-'0');
                idx+=2;
            }
            else
                sum += weights[s[idx++]];
        }
    }
    return make_pair(idx, sum);
}
int main(){
    ios_base::sync_with_stdio(false);
	cin.tie(NULL);

    string s; cin>>s;
    pair<int, int> result = solution(s, 0);

    cout<<result.second;

    return 0;
}
```
</div>
</details>

#### 결과 성공!<br>
![]()

<div class="divider"></div>

#### 주의 <br> 

## 풀이<br>
이 문제는 stack 또는 recursion을 사용하면 된다.<br>
